extends layout.pug
include utils.pug
block content
    script(src="/javascripts/answers.js" type="module")
    div
        h2 #{question.content}
        div #{question.User.username}
        div
            if locals.authenticated
                if question.User.id === locals.user.id
                    a(href=`/questions/${question.id}/edit`) Edit
                    form(action=`/questions/${question.id}/delete`, method='get')
                        button(type='submit') Delete
            span ##{question.Tag.tagName}
            a(href=`/questions/${question.id}/answers/new`) Answer
            each answer in question.Answers
                div
                    div(id='answerDisplay')
                        p #{answer.User.username}
                        p #{answer.content}
                    if locals.authenticated
                        if answer.User.id === locals.user.id
                            form(class='hidden' id=`edit-form-${answer.id}`) 
                                label Edit your answer:
                                input(type="text" name="content" value=answer.content id=`${answer.id}-edit-content`)
                                button(class="edit-cancel" id=`edit-cancel-${answer.id}`) Cancel 
                                button(class=`q-${question.id} edit-submit` id=`edit-submit-${answer.id}`) Submit
                            button(type='submit' class='editBtn' id=`edit-${answer.id}`) Edit
                            button(type='submit' class='deleteBtn'  id=`delete-${answer.id}`) Delete
                            
